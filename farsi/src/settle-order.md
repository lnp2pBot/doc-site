# تکمیل یک سفارش

بسیاری از اختلافات به این دلیل به وجود می‌آیند که یکی از طرفین در پاسخ دادن به یک پیام تاخیر دارد، سوء تفاهم یا تاخیر در پرداخت وجود دارد. اینها موارد ساده ای هستند که فقط به اندکی صبر و کمک در برقراری ارتباط نیاز دارند.

موارد دیگر شامل قصد بدخواهانه است، مانند زمانی که فروشنده می‌خواهد پول فیات را نگه دارد و ساتوشی‌ها را هم پس بگیرد. در این موارد، حل کننده می‌تواند دستور '/settleorder/` را اجرا کند که پرداخت دریافتی را شناسایی کرده و به طور خودکار ساتوشی‌ها را برای خریدار ارسال می‌کند. توجه کنید که مدیر در صورت تشخیص چنین اتفاقی میتواند فرد متقلب(چه فروشنده چه خریدار) را، از استفاده مجدد از ربات به طور کلی منع کند.

![Completing an Order](./assets/images/settleorder.png)

## تکمیل سفارش زمانی که رسیدن فیات خیلی طول می‌کشد
در [@lnp2pbot](https://t.me/lnp2pBot)، روش‌های پرداختی که انتقال فوری فیات را تضمین می‌کنند باید استفاده شود. با این حال، ممکن است مواردی وجود داشته باشد که بیشتر از حد معمول طول بکشد تا وجه فیات به فروشنده برسد. برای مثال، به دلیل مشکلاتی در پردازش پرداخت توسط بانک.
در چنین شرایطی، خریدار بایستی احتمال این ریسک را بدهد که که فروشنده نتواند فیات را [قبل از انقضای فاکتور نگهداری](./how-long-does-it-to-finalize-a-transaction.md) دریافت کند و درنتیجه ساتوشی‌ها را هرگز آزاد نکند. یعنی اگر وجه فیات پس از منقضی شدن فاکتور لایتنینگی داده شده به فروشنده به حسابش بنشیند، فروشنده بنا بر حسن نیت‌اش ممکن است ساتوشی ها را برای خریدار بفرستد یا از آن امتناع کند. برای جلوگیری از این امر، کاربران می‌توانند به حل‌کننده‌های کامیونیتی خود مراجعه کنند تا آنها به عنوان واسطه عمل کنند.

حل‌کننده می‌تواند با استفاده از دستور `<freezeorder <order_id/`، ربات را وادار کند که فاکتور لایتنینگی نگهداری را از فروشنده دریافت کند. به این ترتیب، آنها می‌توانند به اندازه کافی منتظر بمانند تا فیات برسد، و هنگامی که رسید، حل‌کننده با استفاده از دستور `<paytobuyer <order_id/` ساتوشی‌ها را آزاد می‌کند. ممکن است فاکتور خریدار در طول فرآیند منقضی شده باشد، بنابراین آنها باید با تایپ

دستور `<setinvoice <order id> <lightning invoice/` آن را به روز کنند.

این راه حل مستلزم نگهداری حضانتی ساتوشی‌ها داخل ربات است و تنها زمانی باید استفاده شود که گزینه دیگری وجود نداشته باشد.
